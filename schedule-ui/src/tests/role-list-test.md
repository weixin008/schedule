# 值班角色列表功能测试

## 🎯 测试目标

验证值班角色配置页面的列表显示和编辑功能是否正常工作。

## 📋 测试功能

### 1. 角色列表显示
- ✅ 页面加载时显示角色列表视图
- ✅ 显示已配置的角色卡片
- ✅ 空状态提示（无角色时）
- ✅ 角色基本信息展示

### 2. 角色创建
- ✅ 点击"新建角色"按钮
- ✅ 进入配置界面
- ✅ 完成配置后保存
- ✅ 返回列表并显示新角色

### 3. 角色编辑
- ✅ 点击角色卡片的"编辑"按钮
- ✅ 加载现有配置到表单
- ✅ 修改配置并保存
- ✅ 返回列表并显示更新后的角色

### 4. 角色删除
- ✅ 点击角色卡片的"删除"按钮
- ✅ 显示确认对话框
- ✅ 确认删除后移除角色
- ✅ 列表更新

## 🧪 测试步骤

### 步骤1: 访问页面
1. 打开 `http://localhost:9010/schedule/roles`
2. 确认页面显示角色列表视图
3. 检查是否显示"新建角色"按钮

### 步骤2: 创建第一个角色
1. 点击"新建角色"或"创建第一个角色"按钮
2. 填写角色配置：
   ```
   基础信息:
   - 角色名称: 白班医生
   - 描述: 负责白天的医疗服务
   - 值班类型: 白班
   
   时间设置:
   - 值班日期: 工作日
   - 值班频率: 每天值班
   - 开始时间: 08:00
   - 结束时间: 18:00
   
   人员配置:
   - 值班模式: 单人值班
   - 添加2-3个人员到轮换顺序
   
   排班规则:
   - 排班周期: 按周排班
   - 轮换方式: 顺序轮换
   - 最多连续值班: 3天
   ```
3. 点击"保存配置"
4. 确认返回列表并显示新创建的角色

### 步骤3: 创建第二个角色
1. 点击"新建角色"按钮
2. 填写不同的配置：
   ```
   基础信息:
   - 角色名称: 夜班护士
   - 描述: 负责夜间护理工作
   - 值班类型: 夜班
   
   时间设置:
   - 值班日期: 全周
   - 值班频率: 每天值班
   - 开始时间: 22:00
   - 结束时间: 06:00
   
   人员配置:
   - 值班模式: 单人值班
   - 添加护士人员
   
   排班规则:
   - 排班周期: 按周排班
   - 轮换方式: 顺序轮换
   - 最多连续值班: 2天
   ```
3. 保存并确认返回列表

### 步骤4: 编辑角色
1. 点击第一个角色的"编辑"按钮
2. 确认表单已加载现有配置
3. 修改部分配置（如描述、时间等）
4. 保存并确认更新成功

### 步骤5: 删除角色
1. 点击某个角色的"删除"按钮
2. 确认显示删除确认对话框
3. 点击"确定删除"
4. 确认角色从列表中移除

## 🔍 检查点

### 界面检查
- [ ] 角色列表布局美观
- [ ] 角色卡片信息完整
- [ ] 按钮功能正常
- [ ] 响应式设计良好

### 功能检查
- [ ] 创建角色成功
- [ ] 编辑角色成功
- [ ] 删除角色成功
- [ ] 数据持久化正常

### 数据检查
- [ ] 角色信息显示正确
- [ ] 时间格式化正确
- [ ] 工作日显示正确
- [ ] 状态标签正确

## 🚨 常见问题

### 问题1: 页面显示配置界面而非列表
**原因**: viewMode初始值可能不正确
**解决**: 检查viewMode的初始值是否为'list'

### 问题2: 角色列表为空
**原因**: API调用失败或数据格式问题
**解决**: 
- 检查后端服务是否运行
- 查看浏览器控制台错误
- 检查API响应数据

### 问题3: 编辑功能不工作
**原因**: 数据加载或格式转换问题
**解决**:
- 检查loadRoleToForm方法
- 确认extendedConfig数据结构
- 查看时间格式转换

### 问题4: 删除功能失败
**原因**: API权限或后端错误
**解决**:
- 检查DELETE接口是否存在
- 确认用户权限
- 查看后端日志

## 📊 测试结果

### 测试环境
- 测试时间: ___________
- 浏览器: ___________
- 后端版本: ___________

### 功能测试结果
- [ ] 角色列表显示: 通过/失败
- [ ] 角色创建: 通过/失败  
- [ ] 角色编辑: 通过/失败
- [ ] 角色删除: 通过/失败
- [ ] 界面交互: 通过/失败

### 发现的问题
1. ___________
2. ___________
3. ___________

### 改进建议
1. ___________
2. ___________
3. ___________

## 🎉 预期效果

完成测试后，用户应该能够：
- 在列表中查看所有已配置的值班角色
- 轻松创建新的值班角色
- 编辑现有角色的配置
- 删除不需要的角色
- 享受流畅的用户体验

这样的设计让值班角色管理更加直观和高效！